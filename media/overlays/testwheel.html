<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spin Wheel</title>
    <style>
        #canvas1 {
            display: block;
            margin: 0 auto;
			opacity: 0.85;
        }
    </style>
	<style>
		/* entrivia Control Button */
		#Wheel-control-toggle {
			position: fixed;
			bottom: 2px;
			right: 30px;
			width: 40px;
			height: 30px;
			border-radius: 19%;
			background: linear-gradient(113deg, #001f1f, #004040);
			color: #12ebeb;
			border: none;
			font-size: 27px;
			padding: 0px;
			line-height: 0.1;
			cursor: pointer;
			text-shadow: 1px 1px 4px rgb(0 255 239 / 65%);
			box-shadow: 0px 0px 12px rgb(0 255 239 / 65%);
			transition: opacity 0.3s ease, background-color 0.3s ease, transform 0.2s ease;
			z-index: 1000;
			opacity: 0.65;
		}

		#Wheel-control-toggle:hover {
			background-color: #2980b9;
			transform: scale(1.1);
			opacity: 1;
		}

		/* entrivia Control Container */
		#wheel-controlBox {
			position: fixed;
			top: 10px;
			left: 10px;
			width: 348px;
			padding: 10px;
			background: linear-gradient(135deg, #001f1fe8, #004040eb);
			color: white;
			border-radius: 8px;
			box-shadow: 0px 0px 12px rgb(0 255 239 / 65%);
			opacity: 0; /* Start hidden */
			transform: translateY(-10px); /* Slight slide-up effect */
			transition: opacity 0.4s ease-out, transform 0.4s ease-out;
			pointer-events: none; /* Prevent interaction when hidden */
			z-index: 999;
		}

		/* When active (visible) */
		#wheel-controlBox.active {
			opacity: 0.85;
			transform: translateY(0);
			pointer-events: all; /* Allow interactions */
		}
	</style>
	<style>
	  .switch {
		position: relative;
		display: inline-block;
		width: 60px;
		height: 34px;
	  }

	  .switch input { 
		opacity: 0;
		width: 0;
		height: 0;
	  }

	  .slider {
		position: absolute;
		cursor: pointer;
		top: 0; left: 0; right: 0; bottom: 0;
		background-color: #ccc;
		transition: .4s;
		border-radius: 34px;
	  }

	  .slider:before {
		position: absolute;
		content: "";
		height: 26px; width: 26px;
		left: 4px; bottom: 4px;
		background-color: white;
		transition: .4s;
		border-radius: 50%;
	  }

	  input:checked + .slider {
		background-color: #66bb6a;
	  }

	  input:checked + .slider:before {
		transform: translateX(26px);
	  }
	</style>
	<style>
		/* ANIMATIONS */

		/* Logo Drop-In */
		@keyframes logoDropIn {
			0% {
				opacity: 0;
				transform: scale(0.5) rotate(-15deg);
			}
			50% {
				opacity: 1;
				transform: scale(1.2) rotate(5deg);
			}
			100% {
				opacity: 1;
				transform: scale(1) rotate(0deg);
			}
		}

		/* Glow Pulse */
		@keyframes glowPulse {
			0% {
				filter: drop-shadow(0 0 5px #0ea4a4);
			}
			100% {
				filter: drop-shadow(0 0 15px #0ea4a4);
			}
		}

		/* Text Reveal */
		@keyframes textReveal {
			0% {
				opacity: 0;
				transform: translateY(10px);
			}
			50% {
				opacity: 1;
				transform: translateY(0);
			}
			100% {
				opacity: 1;
				text-shadow: 0px 0px 10px #0ea4a4;
			}
		}

		/* Fade In */
		@keyframes fadeIn {
			from { opacity: 0; transform: translateY(10px); }
			to { opacity: 1; transform: translateY(0); }
		}

		/* Fade Out */
		@keyframes fadeOut {
			from { opacity: 1; transform: translateY(0); }
			to { opacity: 0; transform: translateY(-10px); }
		}

		/* Slide In */
		@keyframes slideIn {
			from { opacity: 0; transform: translateX(-50px); }
			to { opacity: 1; transform: translateX(0); }
		}

		/* Slide Out */
		@keyframes slideOut {
			from { opacity: 1; transform: translateX(0); }
			to { opacity: 0; transform: translateX(50px); }
		}


		@keyframes oldlogoDropIn {
			0% {
				opacity: 0;
				transform: scale(0.5) rotate(-15deg);
			}
			50% {
				opacity: 1;
				transform: scale(1.2) rotate(5deg);
			}
			100% {
				transform: scale(1) rotate(0deg);
			}
		}

		@keyframes oldglowPulse {
			0% { filter: drop-shadow(0 0 5px #0ea4a4); }
			100% { filter: drop-shadow(0 0 15px #0ea4a4); }
		}
		@keyframes oldtextReveal {
			0% { opacity: 0; transform: translateY(10px); }
			50% { opacity: 1; transform: translateY(0px); }
			100% { text-shadow: 0px 0px 10px #0ea4a4; }
		}

    </style>
</head>
<body>
	<button id="Wheel-control-toggle">ï¼¥</button>
	<div id="wheel-controlBox">
		<div id="switch-box">
			<label class="switch">
			  <input type="checkbox" id="simulatebackground">
			  <span class="slider"></span>
			</label>
		</div>
		<div id="wheel-piedish">
		  <!-- Remove Section -->
		  <label class="label" for="removewheelsection">
			<select id="removewheelsection"></select>
			<button id="wheel-removesectionButt">Remove</button>
		  </label>
		  <!-- Add Section -->
		  <label class="label" for="addwheelsection">
			<input type="text" id="addwheelsection" placeholder="New section name" />
			<button id="add-removesectionButt">Add</button>
		  </label>
		</div>
	</div>
    <canvas id="canvas1"></canvas>

	<script>
		<!-- simulate background script -->
	  const backgroundImageURL = "https://pixelb8.lol./assets/images/ads/ads19.jpeg"; // Replace with your image

	  function setBackgroundImage(url) {
		document.body.style.backgroundImage = `url('${url}')`;
		document.body.style.backgroundSize = "cover";
		document.body.style.backgroundPosition = "center";
		document.body.style.backgroundRepeat = "no-repeat";
	  }

	  function removeBackgroundImage() {
		document.body.style.backgroundImage = "none";
	  }

	  document.getElementById("simulatebackground").addEventListener("change", function() {
		if (this.checked) {
		  setBackgroundImage(backgroundImageURL);
		} else {
		  removeBackgroundImage();
		}
	  });
	</script>
	<script>

	let canvas = document.getElementById("canvas1");
	let sections = ["FREE Beer Ked", "poop", "free spin", "Recycling Scrip", "Colonist Roulette", "Merp Race", "Trivia", "Ordinance Crate", "idk", "another option", "nothing"];
	let colors = ["#001f1fe8", "#004040eb"];
	let wheels = null;
	let frame = null;
	const removeSelect = document.getElementById("removewheelsection");
	const addInput = document.getElementById("addwheelsection");
	const addButton = document.getElementById("add-removesectionButt");
	const removeButton = document.getElementById("wheel-removesectionButt");

	function updateRemoveDropdown() {
		removeSelect.innerHTML = ""; // Clear current options
		sections.forEach((section, index) => {
			const option = document.createElement("option");
			option.value = index;
			option.textContent = section;
			removeSelect.appendChild(option);
		});
	}

addButton.addEventListener("click", () => {
	const newSection = addInput.value.trim();
	if (newSection && !sections.includes(newSection)) {
		sections.push(newSection);
		updateRemoveDropdown();
		addInput.value = "";
	} else {
		alert("Section name is empty or already exists.");
	}
});

removeButton.addEventListener("click", () => {
	const selectedIndex = removeSelect.value;
	if (selectedIndex !== "") {
	  sections.splice(selectedIndex, 1);
	  updateRemoveDropdown();
	}
});

	  // Initialize dropdown when page loads
updateRemoveDropdown();
//enentrivia-toggle button
document.getElementById("entrivia-toggle").addEventListener("click", function () {
	let container = document.getElementById("entriviacontrolBox");
	container.classList.toggle("active");
});


		function repaint(angle) {
			let r = Math.min(innerWidth, innerHeight) / 2.25 | 0;
			
			if (wheels === null) {
				wheels = [];
				
				// Create the wheel segments
				for (let selected = 0; selected < sections.length; selected++) {
					let canvas = document.createElement("canvas");
					canvas.width = canvas.height = 2 * r + 10;
					let ctx = canvas.getContext("2d");
					let cx = 5 + r, cy = 5 + r;

					// Loop through and draw each section
					for (let i = 0; i < sections.length; i++) {
						let a0 = 2 * Math.PI * i / sections.length;
						let a1 = a0 + 2 * Math.PI / sections.length;
						let a = 2 * Math.PI * (i + 0.5) / sections.length;
						
						ctx.beginPath();
						ctx.moveTo(cx, cy);
						ctx.arc(cx, cy, r, a0, a1, false);
						ctx.fillStyle = colors[i % 2];
						ctx.fill();
						ctx.strokeStyle = "#fff";
						ctx.lineWidth = 1;
						ctx.stroke();

						// Draw the text
						ctx.save();
						ctx.fillStyle = "#FFF";
						ctx.font = "bold " + r / sections.length * 0.4 + "px sans-serif";
						ctx.textAlign = "center";
						ctx.textBaseline = "middle";
						ctx.translate(cx, cy);
						ctx.rotate(a);
						ctx.fillText(sections[i], r * 0.62, 0);
						ctx.restore();
					}
					wheels.push(canvas);
				}
			}

			// Create the frame (outer circle and pointer)
			if (frame === null) {
				frame = document.createElement("canvas");
				frame.width = frame.height = 10 + 2 * r * 1.25 | 0;
				let ctx = frame.getContext("2d"), cx = frame.width / 2, cy = frame.height / 2;

				ctx.beginPath();
				ctx.arc(cx, cy, r * 1.025, 0, 2 * Math.PI, true);
				ctx.arc(cx, cy, r * 0.975, 0, 2 * Math.PI, false);
				ctx.fillStyle = "#0ff";
				ctx.fill();
				
				ctx.fillStyle = "#fff";
				ctx.strokeStyle = "#0ff";
				ctx.lineWidth = 15;
				ctx.beginPath();
				ctx.arc(cx, cy, r / 3.5, 0, 2 * Math.PI, false);
				ctx.fill();
				ctx.stroke();
				
				ctx.translate(cx, cy);
				ctx.rotate(Math.PI - 0.2);
				ctx.beginPath();
				ctx.moveTo(- r * 1.1, - r * 0.05);
				ctx.lineTo(- r * 0.9, 0);
				ctx.lineTo(- r * 1.1, r * 0.05);
				ctx.fillStyle = "#f00";
				ctx.fill();
			}

			// Set canvas size
			canvas.width = innerWidth;
			canvas.height = innerHeight;
			let cx = innerWidth / 2, cy = innerHeight / 2;
			let ctx = canvas.getContext("2d");

			// Get the selected section based on the current angle
			let selected = (Math.floor((-0.2 - angle) * sections.length / (2 * Math.PI)) % sections.length);
			if (selected < 0) selected += sections.length;

			// Draw the selected segment
			ctx.save();
			ctx.translate(cx, cy);
			ctx.rotate(angle);
			ctx.translate(-wheels[selected].width / 2, -wheels[selected].height / 2);
			ctx.drawImage(wheels[selected], 0, 0);
			ctx.restore();

			// Draw the outer frame
			ctx.drawImage(frame, cx - frame.width / 2, cy - frame.height / 2);
		}

		// Spin function
		let angle = 0, running = false;

		function spinTo(winner, duration) {
			let final_angle = (-0.2) - (0.5 + winner) * 2 * Math.PI / sections.length;
			let start_angle = angle - Math.floor(angle / (2 * Math.PI)) * 2 * Math.PI - 5 * 2 * Math.PI;
		  
			let start = performance.now();
			function frame() {
				let now = performance.now();
				let t = Math.min(1, (now - start) / duration);
				t = 3 * t * t - 2 * t * t * t; // ease in out
				angle = start_angle + t * (final_angle - start_angle);
				repaint(angle);
				if (t < 1) requestAnimationFrame(frame); else running = false;
			}
			requestAnimationFrame(frame);
			running = true;
		}

		// Bind the spin to mouse click
		canvas.onmousedown = function() {
			if (!running) {
				spinTo(Math.random() * sections.length | 0, 5000);
			}
		};

		repaint(angle);

	</script>
</body>
</html>




<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EzLay 0.02 - Alphatest</title>
	<link rel="icon" type="image/png" href="/assets/images/logo/pixelbotfavicon.png">
	<link rel="stylesheet" href="/core/css/animations.css">
	<link rel="stylesheet" href="/core/css/pixelb8-holotheme.css">
	<link href="https://fonts.googleapis.com/css2?family=Yatra+One&amp;display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400..700&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Comic+Neue:ital,wght@1,700&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">
</head>
<style>
#pixelpaint {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 750;
    cursor: crosshair;
    pointer-events: auto;
}
#eraser.active {
    background-color: #ffaaaa;
}
#quickPalette {
    display: flex;
    gap: 5px;
    margin-top: 5px;
}
.color-swatch {
    width: 20px;
    height: 20px;
    border-radius: 4px;
    cursor: pointer;
    border: 1px solid #333;
}

</style>
<style>
#captions {
  transition: opacity 1s ease-in-out;
  opacity: 1;
}

#captions.fade-out {
  opacity: 0;
}
</style>
<style>
	.sortable:hover {
		cursor: pointer;
		color: #2775a7;
	}

	.asc::after {
		content: " 🔼"; 
	}

	.desc::after {
		content: " 🔽";
	}

	td {
		color: rgb(165, 152, 152);
	}

	#prizelistWrapper {
		margin: 0 auto;
		display: flex;
		justify-content: center;
		flex-direction: column;
		align-items: start;
		width: 100%;
		max-width: 1000px;
		padding: 10px;
	}

	#winnersTable {
		width: 100%;
		border-collapse: collapse;
	}

	#winnersTable th,
	#winnersTable td {
		border: 1px ridge #2dabfcb8;
		padding: 6px;
		text-align: center;
	}

	/* Scroll wrapper */
	#winnersTableWrapper {
		max-height: 500px;
		overflow-y: auto;
		width: 100%;
		border: 3px ridge #2dabfcb8;
		background-color: #000000c4;
	}

	#winnersTable thead th {
		position: sticky;
		top: 0;
		background-color: #111;
		z-index: 1;
	}
    #prizelistLegend{
		position:fixed;
		top:2px;
		left:2px;
		width: 32vw;
		max-height: 46px;
		overflow: hidden;
		z-index:99999;
		background-color:rgba(0, 0, 0, 0.8);
		border: 3px ridge;
		border-color: #2dabfcb8;
		border-radius: 12px;
		text-align: center;
		padding: 4px;
		transition:all 0.3s ease;
	}
	#prizelistLegend:hover{
		max-height: 115px;
	}
#unclaimedPrizesWrapper {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background-color: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 10px 20px;
    border-radius: 10px;
    z-index: 999999;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 50px; 
    overflow: hidden;
}

#unclaimedPrizeList {
    display: flex;
    align-items: center;
    white-space: nowrap;
    animation: scrollUnclaimedPrizes 90s linear infinite;
}

.unclaimed-prize-item {
    font-size: 16px;
    margin-right: 30px; 
    padding: 5px 10px;
    background-color: rgba(255, 255, 255, 0.2);
    border-radius: 5px;
    color: #fff;
}

@keyframes scrollUnclaimedPrizes {
    0% {
        transform: translateX(100%); 
    }
    100% {
        transform: translateX(-100%); 
    }
}
.username-header {
    font-size: 18px;
    font-weight: bold;
    color: #ffcc00;  
    margin-bottom: 10px; 
}

#userPrizesWrapper {
    position: fixed;
    top: 80%;
    left: 0;
    right: 0;
    background-color: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 10px 20px;
    border-radius: 10px;
    z-index: 9999;
    display: flex;
    flex-direction: column;
    align-items: center;
    height: auto;
	width: 170px;
    max-width: 20%;
    overflow: hidden;
    opacity: 1;
    transition: opacity 2s ease-out;
}

#userPrizeList {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.user-prize-item {
    font-size: 16px;
    margin-bottom: 10px;
    padding: 5px 10px;
    background-color: rgba(255, 255, 255, 0.2);
    border-radius: 5px;
    color: #fff;
}
</style>
	<body>
		<div id="streamSpace"></div>
		
		<!--===============================================-->
		<div id="bubblewrap">
			<button class="Butt" id="thePixelButt">Ᵽ</i></button>
			<div id="Bubble">
				<!-- 🔌 🎮 🖥️🔧📝 🎨 🖼️-->
				<button class="Butt widgetcontrols" id="comfy-Butt"><i class="fab fa-twitch"></i></button><!-- 💬🔌 🎮 🖥️🔧📝 🎨 🖼️-->
				<button class="Butt widgetcontrols" id="wheel-Butt"><i class="fa-regular fa-life-ring"></i></button>
				<button class="Butt widgetcontrols" id="entrivia-Butt">Ｅ</button>
				<button class="Butt widgetcontrols" id="pixelpen-Butt"><i class="fas fa-palette"></i></button>
				<button class="Butt widgetcontrols" id="theme-Butt">⚙</button> 
			</div>
		</div>
		<!--===============================================-->
		<div  id="console"></div>
		<!--===============================================-->
		<!--this is the container for messages from twitch -->
		<div id="twitchChat">
			<div id="exampleMessagebox" style="display: none;">
				<div class="exampleMessage"><span class="username" style="color: rgb(255, 105, 180);">JaeDraze: </span><span class="twitchmessage">find best viewers at ************.com</span></div>
				<div class="exampleMessage"><span class="username" style="color: red;">cooldude420: </span><span class="twitchmessage">I just farted</span></div>
				<div class="exampleMessage"><span class="username" style="color:blue;">boobs6969: </span><span class="twitchmessage">lol wow!</span></div>
				<div class="exampleMessage"><span class="username" style="color:brown;">hankhilllover: </span><span class="twitchmessage">I sell propane and propane accesories</span></div>
			</div>
			<div id="twitchMessagebox">
			</div>
			
		</div>
		<!--===============================================-->
		<div id="entriviaCmdContainer">
			<div id="entriviaMessagebox">
			</div>
		</div>
		
		<!-- this is the announcements panel. it can contain text or text and a timer or other elements -->
		<div class="panel" id="Announcements" style="display:none;">
			<div class="announcement" id="announcement-panel-message"></div>
			<div class="announcement timer" id="announcement-panel-timer"></div>
		</div>
		<div class="panel" id="entriviapanel" style="display:none;">
			<div class="message" id="entrivia-panel-message"></div>
			<div class="Panel-timer" id="entrivia-panel-timer"></div>
		</div>

		<div class="controller" id="theme-controller">
			<button class="close-btn">×</button>
			<div id="entrivia-settings-headergroup">
				<h2 class="controllerheader" style="">Settings</h2>
			</div>
			<div class="controlpanel" id="theme-controlpanel">
				<div id="controls" id="theme-controls">
					<h3>Theme Settings</h3>
					<div class="" id="themeButtWrap">
						<button class="Butt themeselect" id="light-themeButt" title="light">🌞</button>
						<button class="Butt themeselect" id="dark-themeButt" title="dark">🌙</button>
						<button class="Butt themeselect" id="business-themeButt" title="Business">💼</button>
						<button class="Butt themeselect" id="retro-themeButt" title="retro">🕹️</button>
						<button class="Butt themeselect" id="synthwave-themeButt" title="Synthwave">🕶️</button>
						<button class="Butt themeselect" id="wastelandterminal-themeButt" title="Wasteland Terminal">🧪</button>
						<button class="Butt themeselect" id="biohazard-themeButt" title="Biohazard">☣️</button>
						<button class="Butt themeselect" id="neonvoid-themeButt" title="Neonvoid">🟪</button>
						<button class="Butt themeselect" id="nineties-themeButt" title="nineties">🔳</button>
						<button class="Butt themeselect" id="scroll-themeButt" title="scroll">🧾</button>
						<button class="Butt themeselect" id="bubblegumpop-themeButt" title="BubbleGum Pop">🧁</button>
						<button class="Butt themeselect" id="custom-themeButt" title="custom">🐇</button>
						<button class="Butt themeselect" id="poop-themeButt" title="poop">💩</button>
						<button class="Butt themeselect" id="cyberice-themeButt" title="Cyber">🧊</button>
						<button class="Butt themeselect" id="hud-themeButt" title="hud">🟦</button>
						<button class="Butt themeselect" id="holo-themeButt" title="Holo">💠</button>
					</div>
					<div class="" id="posSliders">
						<h3>Layout Settings</h3>
						<div>
						  <label>Twitch Chat Y:
							<input class="rangeinput" type="range" id="twitchchatY" min="0" max="75" value="0">
							<span id="twitchchatYValue">0%</span>
						  </label>
						</div>
						<div>
						  <label>Twitch Chat X:
							<input class="rangeinput" type="range" id="twitchchatX" min="0" max="70" value="0">
							<span id="twitchchatXValue">0%</span>
						  </label>
						</div>
						<div>
						  <label>Entrivia Announcement Y:
							<input class="rangeinput" type="range" id="entriviaAnnouncementY" min="0" max="100" value="71">
							<span id="entriviaAnnouncementYValue">71%</span>
						  </label>
						</div>
						<div>
						  <label>Entrivia Announcement X:
							<input class="rangeinput" type="range" id="entriviaAnnouncementX" min="0" max="100" value="2">
							<span id="entriviaAnnouncementXValue">2px</span>
						  </label>
						</div>
						<div>
						  <label>Entrivia Question Y:
							<input class="rangeinput" type="range" id="entriviaQuestionY" min="0" max="88" value="71">
							<span id="entriviaQuestionYValue">71%</span>
						  </label>
						</div>
						<div>
						  <label>Entrivia Question X:
							<input class="rangeinput" type="range" id="entriviaQuestionX" min="0" max="71" value="2">
							<span id="entriviaQuestionXValue">2px</span>
						  </label>
						</div>
					</div>
					<br>
					<div class="switchbox" id="switch-box">
						toggle background
						<label class="switch">
						<input type="checkbox" id="simulatebackground">
						<span class="slider"></span>
						</label>
					</div>
					<div class="switchbox" id="switch-box">
						Show example panels
						<label class="switch">
						<input type="checkbox" id="showthemeExamples">
						<span class="slider"></span>
						</label>
					</div>
				</div>
			</div>
		</div>
		<div class="controller" id="comfy-controller">
			<button class="close-btn">×</button><h2 class="controllerheader">Get Comfy</h2>
			<div class="controlpanel" id="">
				<div class="controls">
					<input class="a" type="text" name="yourTextName" id="twitchname" placeholder="Enter Your Twitch Streamer Name">
					<button class="a" id="streamersButt">Connect</button>
					<button class="a" id="twitchdisconnectButt" onclick="disconnectBot()">Disconnect from Twitch</button>
				</div>
				<div id="more-controls" style="">
				</div>
			</div>
		</div>		
		<div class="controller" id="wheel-controller">
		<button class="close-btn">×</button><h2 class="controllerheader">Spin Wheel Controls</h2>
			<div class="controlpanel">
				<div class="controls"id="wheel-maincontrols">
					<div class="row" for="wheel-spinButt">
						<button class="a Butt" id="showWheelButt" data-target="wheelcanvaswrapper" data-animation="fade">
						  <i class="fas fa-eye"></i> Show
						</button>
						<button id="discRotationButton">
						  <i class="fas fa-sync-alt"></i> Spin Wheel
						</button>
					</div>
				</div>
				<div class="controls"id="wheel-piedish">
				
				  <!-- Remove Section -->
				  <div class="row" for="removewheelsection">
					<select class="a" id="removewheelsection"></select>
					<button class="a Butt remove" id="wheel-removesectionButt"><i class="fas fa-times"></i> Remove </button>
				  </div>
				  <!-- Add Section -->
				  <div class="row" for="addwheelsection">
					<input class="a" type="text" id="addwheelsection" placeholder="New section name" />
					<button class="a Butt add" id="wheel-addsectionButt"><i class="fas fa-plus"></i> Add Slice</button>
				  </div>
				  <!-- save Section -->
				  <div class="row" for="savewheelsections">
					<input class="a" type="text" id="savewheelsections" placeholder="Name your wheel" />
					<button class="a Butt save" id="save-sectionsButt">save wheel</button>
				  </div>
				  <!-- Load Section -->
				  <div class="row" for="loadwheelsections">
					<select class="a" id="loadwheelsection"></select>
					<button class="a Butt load" id="load-sectionsButt">Load Wheel</button>
					<button class="a Butt delete" id="delete-saved-wheel">Delete Wheel</button>
				  </div>
				</div>
				<div class="" id="wheelposSliders">
					<div>
					  <label>Wheel Y:
						<input class="rangeinput" type="range" id="wheelY" min="0" max="66" value="60">
						<span id="wheelYValue">0%</span>
					  </label>
					</div>
					<div>
					  <label>Wheel X:
						<input class="rangeinput" type="range" id="wheelX" min="0" max="90" value="87">
						<span id="wheelXValue">0%</span>
					  </label>
					</div>
					<div>
					  <label>Wheel Result Y:
						<input class="rangeinput" type="range" id="wheelResultY" min="0" max="100" value="0">
						<span id="wheelResultYValue">71%</span>
					  </label>
					</div>
					<div>
					  <label>Wheel Result X:
						<input class="rangeinput" type="range" id="wheelResultX" min="0" max="100" value="15">
						<span id="wheelResultXValue">2%</span>
					  </label>
					</div>
					<div>
					  <label>Wheel Lever Y:
						<input class="rangeinput" type="range" id="wheelLeverY" min="0" max="100" value="45">
						<span id="wheelLeverYValue">45%</span>
					  </label>
					</div>
					<div>
				  <label>Wheel Lever X:
					<input class="rangeinput" type="range" id="wheelLeverX" min="0" max="100" value="95%">
					<span id="wheelLeverXValue">2px</span>
				  </label>
					</div>
				</div>
				<div class="" id="discRotationLeverSettings">
				  <label>
					Lever Visibility:
					<select id="discRotationLeverToggle">
					  <option value="on">On</option>
					  <option value="always">Always</option>
					  <option value="off">Off</option>
					</select>
					<div id="enableLeverIndicator" class="status-indicator" data-status-variable="enableLever"></div>

				  </label>
				  <br />
				  <label>
					<input type="checkbox" id="autoFadeToggle" checked />
					Enable Auto Fade
				  </label>
				  <br />
				  <label>
					Auto Fade Time (ms):
					<input type="number" id="fadeTimeInput" value="5" step="1" min="0" />
				  </label>
				  <div id="autoFadeIndicator" class="status-indicator" data-status-variable="autoFade"></div>
				</div>
			</div>
		</div>
		<div class="controller" id="pixelpen-controller">
			<button class="close-btn">×</button><h2 class="controllerheader">pixelpen</h2>
			<div class="controlpanel">
				<div class="controls" id="main-settings-controls">

				</div>
			</div>
		</div>
		<div class="controller" id="entrivia-controller">
			<button class="close-btn">×</button>
			<div id="entrivia-settings-headergroup">
				<h2 class="controllerheader" style="">Entrivia</h2>
			</div>
			<div class="controlpanel" id="entrivia-settings">
				<div class="controls" id="entrivia-controls">
					<div class="entriviasettings-input inputRow" id="entrivia-bar-settingsbutts">
						<button class="a" id="cancelGame">Abort Game</button>
						<button class="a" id="startGame">Play Entrivia Classic</button>
					</div>
				</div>
					<h3>entrivia Settings</h3>
				<div class="controls" id="entrivia-settings-toggles">
					<div class="entrivia-settings-togglebar optiontoggle-entrivia" data-option="usedefaultquestions"></div>
					<div class="twitchcmd-info" data-option="!entrivia-defaultquestions"></div>
					<div class="entrivia-settings-togglebar optiontoggle-entrivia" data-option="usecustomquestions"></div>
					<div class="twitchcmd-info" data-option="!entrivia-customquestions"></div>
				</div>
				<div class="controls" id="addCustomQuestionForm">
					<h3>Add a Custom Entrivia Question</h3>
					<div class="twitchcmd-info" data-option="!entrivia-addquestion"></div>
					<!-- Question Type Selection -->
					<div class="inputRow" id="">
						<label for="questionType">Type:</label>
						<select class="a" id="questionType">
							<option value="singlechoice">Single Choice</option>
							<option value="multiplechoice">Multiple Choice</option>
						</select>
					</div>

					<!-- Round Selection -->
					<div class="inputRow" id="">
						<label for="round">Difficulty:</label>
						<select class="a" id="round">
							<option value="round1">Easy</option>
							<option value="round2">Hard</option>
						</select>
					</div>

					<!-- Category Selection -->
					<div class="inputRow" id="">
						<label for="entriviacategory">Category:</label>
						<select class="a" id="entriviacategory">
							<option value="Hunting">Hunting</option>
							<option value="Mining">Mining</option>
							<option value="Crafting">Crafting</option>
							<option value="Missions">Missions</option>
							<option value="History">History</option>
							<option value="Beauty">Beauty</option>
							<option value="Economy">Economy</option>
							<option value="Social">Social</option>
							<option value="Miscellaneous">Miscellaneous</option>
						</select>
					</div>


					<!-- Input for Multiple Choice Options (will show when type is "multiplechoice") -->
					<div class="inputRow" id="multipleChoiceOptions" style="display: none;">
						<input class="a" type="text" id="answerOptions" title="seperate answer options with a comma and be sure to include the correct answer as one of the options!! options eg. Apple, Banana, Cherry"placeholder="enter options eg. Apple, Banana, Cherry">
					</div>

					<!-- Question Text Input -->
					<div class="inputRow" id="">
						<input class="a" type="text" id="questionText" placeholder="Enter your question here" required>
					</div>

					<!-- Correct Answer Input -->
					<div class="inputRow" id="">
						<input class="a" type="text" id="correctAnswer" placeholder="Enter the correct answer" required>
					</div>

					<button class="a add" id="submitQuestionBtn">Add Question</button>
				</div>
				<br>

				<!-- Manage Questions (for deletion and viewing) -->
				<div class="controls" id="manageCustomQuestions">
					<h3>Manage Custom Entrivia Questions</h3>
					<label for="questionList">Select Question to Delete:</label>
					<select class="a" id="questionList"></select>

					<div id="answerDisplay" style="margin-top: 10px;">
						<strong>Round:</strong> <span id="roundText">-</span><br>
						<strong>Answer:</strong> <span id="answerText">Select a question to see the answer.</span>
					</div>
					<button class="a remove" id="deleteQuestionBtn">Delete Selected Question</button>
					<hr>
					<button class="a smol" id="showCSVPanelButton">📄Questions</button>
					
					<div id="csvPanel" style="display: none; margin-top: 10px;">
						<button class="a smol" id="toggleCSVSourceButton">🧩 Show Your Questions</button>
						<button class="a smol" id="copyQtoclip" title="Copy text area clipboard">📋 Copy textarea</button>
						<button class="a smol" id="copyCustomCSVButton" title="Copy custom questions to clipboard">📋 Copy Yours</button>
						<button class="a smol" id="copyFullCSVButton" title="copy All questions to clipboard">📋 Copy All</button>
						<textarea id="csvOutputText" rows="20" cols="100" readonly></textarea><br>
						<button class="a smol" id="downloadCSVButton">⬇️ DL Your Q</button>
						
						<button class="a smol" id="downloadFullCSVButton">⬇️ DL All Q</button>
						
					</div>
				</div>
				<div class="controls" id="entrivia-settings-main">
					<h3>Main entrivia Settings</h3>
					<div class="entriviasettings-input inputRow" id="entrivia-bar-Questiondelay">
						<label for="timeBetweenQuestions">Seconds Between Questions:</label>
						<input class="a" type="number" id="timeBetweenQuestions" value="30" min="1" step="1">
					</div>
					<div class="twitchcmd-info" data-option="!entrivia-questiondelay"></div>
					<div class="entriviasettings-input inputRow" id="entrivia-bar-Answertime">
						<label for="timeToAnswer">Time to Answer (seconds):</label>
						<input class="a" type="number" id="timeToAnswer" value="30" min="1" step="1">
					</div>
					<div class="twitchcmd-info" data-option="!entrivia-answertime"></div>
					<div class="entriviasettings-input inputRow" id="entrivia-bar-QuestionsperRound">
						<label for="questionsPerRound">Questions Per Round:</label>
						<input class="a" type="number" id="questionsPerRound" value="1" min="1" step="1">	
					</div>
					<div class="twitchcmd-info" data-option="!entrivia-questioncap"></div>
					<div class="entriviasettings-input inputRow" id="entrivia-bar-rounddelay">
						<label for="timeBetweenRounds">Seconds Between Rounds:</label>
						<input class="a" type="number" id="timeBetweenRounds" value="30" min="1" step="1">
					</div>
					<div class="twitchcmd-info" data-option="!entrivia-rounddelay"></div>
					<div class="entriviasettings-input inputRow" id="entrivia-bar-settingsbutts">
						<button class="a" id="changeSettings">Set</button>
						<button class="a" id="resetSettings">Default</button>
					</div>
				</div>
				<div id="commandListContainer">
				  <h3>entrivia Command List</h3>
				  <h2>User Commands</h2>
				  <ul id="usercommandList">
				  </ul>
				  <h2>Broadcaster Commands</h2>
				  <ul id="broadcastercommandList">
				  </ul>
				</div>
				<div class="togglecontrols" id="entrivia-settings-toggles">
					<h3>Dont worry bout these</h3>
					<div class="entrivia-settings-togglebar optiontoggle-entrivia" data-option="hideButtonBubble"></div>
					<div class="twitchcmd-info" data-option="!entrivia-hideButtonBubble"></div>
					<div class="entrivia-settings-togglebar optiontoggle-entrivia" data-option="consolemessages"></div>
					<div class="twitchcmd-info" data-option="!entrivia-consolemessages"></div>
					<div class="entrivia-settings-togglebar optiontoggle-entrivia" data-option="twitchChatOverlay"></div>
					<div class="twitchcmd-info" data-option="!entrivia-disablechat"></div>
					<div class="entrivia-settings-togglebar optiontoggle-entrivia" data-option="chatanswers"></div>
					<div class="twitchcmd-info" data-option="!entrivia-chatanswers"></div>
				</div>
				<div class="controls" id="entrivia-admincontrols">
					<div class="entriviasettings-input" id="entrivia-bar-adminbutts">
						<h3>Entrivia Suggested Questions Admin</h3>
						<button class="a" onclick="loadSuggestedQuestions()">📦 Load Suggested Questions</button>
						<div id="suggestedQuestionsContainer"></div>
						<hr>
						<button class="a" onclick="loadApprovedQuestions()">📋 Load Approved Questions</button>
						<div id="approvedQuestionsContainer"></div>
					</div>
				</div>
			</div>
		</div>
		<div class="controller" id="caption-controller"><button class="close-btn">×</button>
			<h2 class="controllerheader" style="">Captions</h2>
			<div class="controlpanel" id="caption-settings">
				<div class="controls" id="captioncontrols">
					<button id="voice-btn">🎙️</button>
					<button id="stop-voice-btn" disabled>Stop 🎙️</button>
					<p id="output">Listening...</p>
					<label for="lang-select">Translate to:</label>
					<select id="lang-select">
					  <option value="en">English</option>
					  <option value="ar">Arabic</option>
					  <option value="az">Azerbaijani</option>
					  <option value="zh">Chinese</option>
					  <option value="cs">Czech</option>
					  <option value="de">German</option>
					  <option value="el">Greek</option>
					  <option value="es">Spanish</option>
					  <option value="fa">Persian (Farsi)</option>
					  <option value="fr">French</option>
					  <option value="he">Hebrew</option>
					  <option value="hi">Hindi</option>
					  <option value="hu">Hungarian</option>
					  <option value="id">Indonesian</option>
					  <option value="it">Italian</option>
					  <option value="ja">Japanese</option>
					  <option value="ko">Korean</option>
					  <option value="nl">Dutch</option>
					  <option value="pl">Polish</option>
					  <option value="pt">Portuguese</option>
					  <option value="ro">Romanian</option>
					  <option value="ru">Russian</option>
					  <option value="sk">Slovak</option>
					  <option value="sv">Swedish</option>
					  <option value="tr">Turkish</option>
					  <option value="uk">Ukrainian</option>
					  <option value="vi">Vietnamese</option>
					</select>
				</div>
			</div>
		</div>
		<div class="container" id="prizelistWrapper"style="display: none;">
			<h1 style="color: #2775a7;background-color:rgba(0, 0, 0, 0.8); border: 3px ridge; border-color: #2dabfcb8; border-radius: 12px; text-align: center; padding: 4px;margin: auto;z-index: 999999;">
				Prize Winners
			</h1>
			<div id="prizelistLegend">
				<p style="margin:0;padding:4px;color: orange;background-color:rgba(112, 32, 10, 0.4);">unclaimed</p>
				<p style="margin:0;padding:4px;color: grey;background-color:rgba(110, 109, 109, 0.54);">claimed</p>
				<button id="toggleClaimedBtn">Show Claimed</button>
				<button id="toggleDateBtn">Show Date</button>
				<input type="text" id="usernameFilter" placeholder="Filter by username" style="margin:auto;padding: 0px;">
			</div>
			<!-- Scrollable wrapper -->
			<div style="max-height:75vh;width: 65vw;overflow-y: scroll;border: 3px ridge #2dabfcb8;">
				<table id="winnersTable" style="background-color: rgba(0, 0, 0, 0.8); width: 100%; text-align: center;">
					<colgroup>
						<col id="dateCol" style="width: 25%; display: none;"> <!-- Date -->
						<col style="width: 25%;">  <!-- Winner Name -->
						<col style="width: 15%;">  <!-- Amount -->
						<col style="width: 15%;">  <!-- Prize -->
					</colgroup>
					<thead>
						<tr>
							<th class="sortable" data-index="0" id="dateHeader" style="display: none;">Date</th>
							<th class="sortable" data-index="1">Winner Name</th>
							<th class="sortable" data-index="2">Amount</th>
							<th class="sortable" data-index="3">Prize</th>
						</tr>
					</thead>
					<tbody style="color:rgb(165 152 152);">
						<!-- Data will be inserted here -->
					</tbody>
				</table>
			</div>

			<h2 id="totalAmount" style="text-align:center;color: #2775a7;background-color:rgba(0, 0, 0, 0.8); border: 3px ridge; border-color: #2dabfcb8; border-radius: 12px; text-align: center; padding: 4px;">Total Value: 0.00 Ped</h2>
		</div>
		<div class="spinwheel" id="wheelWrapper" style="">
			<div class="" id="wheel-result" style=""></div>
			
			<div class="lever-wrapper" id="discRotationLeverWrapper">
			  <div class="lever-slot">
				<div id="discRotationLever" class="lever">
				  <div class="lever-knob"></div>
				  <div class="lever-stick"></div>
				</div>
			  </div>
			</div>
			<div class="" id="wheelcanvaswrapper">
				<canvas id="canvas1"></canvas>
			</div>
		</div>
		<div id="captions" style="position: fixed; bottom: 10px; width: 100%;z-index:99999; text-align: center; color: var(--text-color); font-size: 1.5rem;"></div>
		<!--
		Enrivia Wrapper 
		-->
		<div id="entriviaOverlay" style="">
			<!-- Wrapper for the entrivia Splash Animation -->
			<div id="entriviaSplash" style="display:none;">
				<div id="logoContainer">
					<!-- <img src="../assets/images/logo/pixelbotfavicon.png" alt="entrivia Logo" id="entriviaLogo" /> -->
					<img src="/assets/images/jaedrazepfp.png" alt="entrivia Logo" id="entriviaLogo" />
				</div>
				<div id="susText">S.u.Stv Presents:</div>
				<div id="splashText">entrivia Universe</div>
			</div>
			<!-- entriviaAnnouncementWrapper -->
			<div class="panel" id="examplepanelwrapper">
				<div id="exampleAnnouncement">Announcement text: </div>
				<div id="exampletimer">30 seconds</div>
			</div>
			<div class="panel" id="entriviaAnnouncementWrapper">
				<div id="entriviaAnnouncement"></div>
				<div id="roundstarttimer"></div>
			</div>
			<!-- add user entrivia rank and rank badges: rank1🥇 rank2🥈 rank3🥉 rank4🏅 rank5-10?🎖️-->
			<div id="consoleMessagebox"></div>
			<div id="entriviaWrapper">
				<div id="entriviaPodium" style="display: none; text-align:center;">
					<div id="first">
						<span class="trophy gold">🏆1st</span>
						<div class="winner" id="winner1">
							<p id="winner1Score" class="winner-score">score: 0</p>
							<p id="winner1Name" class="winner-name">Undefined</p>
						</div>
					</div>
					<div id="secondandthirdplace">
						<div id="second">
							<span class="trophy silver">🥈2nd</span>
							<div class="winner" id="winner2">
								<p id="winner2Score" class="winner-score">score: 0</p>
								<p id="winner2Name" class="winner-name">Undefined69</p>
							</div>
						</div>
						<div id="third">
							<span class="trophy bronze">🥉3rd</span>
							<div class="winner" id="winner3">
								<p id="winner3Score" class="winner-score">score: 0</p>
								<p id="winner3Name" class="winner-name">undefined420</p>
							</div>
						</div>
					</div>
					<!-- 4th and 5th place winners (smaller) -->
					<div id="entriviarunnerups">
						<div class="winner small" id="winner4">
							<span class="runnerup ribbon">🏅4th</span>
							<p id="winner4Name" class="winner-name">undetermined</p>
							<p id="winner4Score" class="winner-score">score: 0</p>
						</div>
						<div class="winner small" id="winner5">
							<span class="runnerup medal">🎖️5th</span>
							<p id="winner5Name" class="winner-name">mrsuperlongnameguy476</p>
							<p id="winner5Score" class="winner-score">score: 0</p>
						</div>
					</div>
				</div>
				<!-- time until next question -->
				<div id="timeuntil-nextQ"></div>
				<!-- entrivia questions wrapper -->
				<div class="panel" id="questionWrapper">
					<p id="question-counter"></p>
					<div id="question">...
						<div class="answeroptions">
							<div class="answeroption">choice 1</div>
							<div class="answeroption">choice 2</div>
							<div class="answeroption">choice 3</div>
							<div class="answeroption">choice 4</div>
						</div>
					</div>
					<div id="timer"></div>
				</div>
				<!-- entrivia leaderboard -->
				<ul id="entriviaboard">
					<p>entrivia</p>
				</ul>
			</div>
		</div>
		<!--this is the underlay its mostly for aesthetics and sits behind everything else it might be a border or different animated elements -->
		
		<div id="underlay"></div>
		<div id="pageborder"></div>
		<!--
		PixelPaint Wrapper 
		-->
		<canvas id="pixelpaint" style="position: absolute; top: 0; left: 0; z-index: 750; pointer-events: auto;"></canvas>
<!--------------------->
<!--       End of body        
_____________________________  -->
	<script>
	let prizeData = [];
	let sortDirections = [true, true, true, true]; // 4 columns now
	let showClaimed = false;
	let showDate = false;

	document.getElementById('toggleClaimedBtn').addEventListener('click', () => {
		showClaimed = !showClaimed;
		document.getElementById('toggleClaimedBtn').textContent = showClaimed ? 'Hide Claimed' : 'Show Claimed';
		filterAndRender();
	});
	document.getElementById('toggleDateBtn').addEventListener('click', () => {
		showDate = !showDate;
		document.getElementById('toggleDateBtn').textContent = showDate ? 'Hide Date' : 'Show Date';
		filterAndRender();
	});
	document.getElementById('usernameFilter').addEventListener('input', () => {
		filterAndRender();
	});
	function loadCSVFile() {
		const csvPath = '/eu/data/JaedrazeTTV-EU-viewerPrizelist.txt';
		fetch(csvPath)
			.then(response => response.text())
			.then(data => {
				const rows = data.split('\n');
				let totalAmount = 0;
				prizeData = []; // Clear any existing data

				rows.forEach(row => {
					const columns = row.split(',');
					if (columns.length >= 5) {
						const status = columns[4].trim().toLowerCase();
						const amount = parseFloat(columns[2]) || 0;

						totalAmount += amount;

						prizeData.push({
							date: columns[0].trim(),
							winner: columns[1].trim(),
							amount: amount,
							prize: columns[3].trim(),
							status: status
						});
					}
				});

				document.getElementById('totalAmount').textContent = `Total Amount: $${totalAmount.toFixed(2)}`;
				filterAndRender(); // Call the new render function here
			})
			.catch(error => console.error('Error loading CSV file:', error));
	}

	function sortTable(index) {
		const tbody = document.querySelector('#winnersTable tbody');
		const rows = Array.from(tbody.querySelectorAll('tr'));
		sortDirections[index] = !sortDirections[index];

		rows.sort((a, b) => {
			const aText = a.children[index].textContent;
			const bText = b.children[index].textContent;

			if (index === 2) {
				return sortDirections[index] ? parseFloat(aText) - parseFloat(bText) : parseFloat(bText) - parseFloat(aText);
			} else if (index === 0) {
				return sortDirections[index] ? new Date(aText) - new Date(bText) : new Date(bText) - new Date(aText);
			} else {
				return sortDirections[index] ? aText.localeCompare(bText) : bText.localeCompare(aText);
			}
		});

		rows.forEach(row => tbody.appendChild(row));

		document.querySelectorAll('.sortable').forEach((header, idx) => {
			header.classList.remove('asc', 'desc');
			if (idx === index) {
				header.classList.add(sortDirections[idx] ? 'asc' : 'desc');
			}
		});
	}

	function filterAndRender() {
		const tbody = document.querySelector('#winnersTable tbody');
		tbody.innerHTML = '';
		let totalAmount = 0;

		const usernameFilterValue = document.getElementById('usernameFilter').value.toLowerCase();

		prizeData.forEach(entry => {
			const isClaimed = entry.status.trim().toLowerCase() === 'claimed';
			if (!showClaimed && isClaimed) return;
			if (usernameFilterValue && !entry.winner.toLowerCase().includes(usernameFilterValue)) return;

			const row = document.createElement('tr');
			row.style.backgroundColor = isClaimed ? '#6e6d6d8a' : '#70200a66';

			const keysToRender = showDate ? ['date', 'winner', 'amount', 'prize'] : ['winner', 'amount', 'prize'];

			keysToRender.forEach((key) => {
				const cell = document.createElement('td');
				cell.textContent = key === 'amount' ? entry[key].toFixed(2) : entry[key];

				if (isClaimed) {
					cell.style.color = key === 'amount' ? 'rgb(165, 152, 152)' : 'grey';
				} else {
					cell.style.color = 'orange';
				}

				row.appendChild(cell);
			});

			tbody.appendChild(row);
			totalAmount += entry.amount;
		});

		document.getElementById('dateCol').style.display = showDate ? '' : 'none';
		document.getElementById('dateHeader').style.display = showDate ? '' : 'none';
		document.getElementById('totalAmount').textContent = `Total Value: ${totalAmount.toFixed(2)} Ped`;
	}

function displayUnclaimedPrizes() {
    // Check if prizeData is populated
    console.log("Prize Data:", prizeData);

    // Filter out the unclaimed prizes from the prizeData array
    const unclaimedPrizes = prizeData.filter(prize => prize.status.toLowerCase() === 'unclaimed');

    // If there are no unclaimed prizes, exit early
    if (unclaimedPrizes.length === 0) {
        console.log("No unclaimed prizes available.");
        return;
    }

    // Create the wrapper element for the unclaimed prizes
    const unclaimedPrizesWrapper = document.createElement('div');
    unclaimedPrizesWrapper.id = 'unclaimedPrizesWrapper';

    // Create the list container inside the wrapper
    const unclaimedPrizeList = document.createElement('div');
    unclaimedPrizeList.id = 'unclaimedPrizeList';
    unclaimedPrizesWrapper.appendChild(unclaimedPrizeList);

    // Add each unclaimed prize to the list
    unclaimedPrizes.forEach(prize => {
        const prizeItem = document.createElement('div');
        prizeItem.classList.add('unclaimed-prize-item');
        prizeItem.textContent = `${prize.winner} won ${prize.prize} and it is unclaimed!`;
        unclaimedPrizeList.appendChild(prizeItem);
    });

    // Insert the wrapper at the top of the body
    document.body.insertBefore(unclaimedPrizesWrapper, document.body.firstChild);

    // Trigger the animation immediately after insertion by using a small timeout to allow DOM update
    setTimeout(() => {
        unclaimedPrizeList.style.animation = 'scrollUnclaimedPrizes 60s linear infinite'; // Start animation immediately
    }, 0); // Start without delay

    // Debug message to confirm element was created
    console.log("Unclaimed prizes wrapper added to body");

    // Add event listener to remove wrapper after the animation ends
    unclaimedPrizeList.addEventListener('animationend', () => {
        console.log("Removing unclaimed prizes wrapper after animation.");
        document.body.removeChild(unclaimedPrizesWrapper);
    });
}

function displayUserPrizes(username) {
    // Check if prizeData is populated
    console.log("Prize Data:", prizeData);

    // Filter the prizeData to get only unclaimed prizes for the given user
    const userPrizes = prizeData.filter(prize => prize.winner.toLowerCase() === username.toLowerCase() && prize.status.toLowerCase() === 'unclaimed');

    // If there are no unclaimed prizes for the user, display a custom message
    if (userPrizes.length === 0) {
        // Create the wrapper element for the user's prizes
        const noPrizesWrapper = document.createElement('div');
        noPrizesWrapper.id = 'noPrizesWrapper';

        // Create the message container inside the wrapper
        const noPrizesMessage = document.createElement('div');
        noPrizesMessage.id = 'noPrizesMessage';
        noPrizesMessage.textContent = `${username} hasn't won jack sh*t yet.`;
        noPrizesWrapper.appendChild(noPrizesMessage);

        // Insert the wrapper at the top of the body
        document.body.insertBefore(noPrizesWrapper, document.body.firstChild);

        // Fade out the wrapper after 60 seconds
        setTimeout(() => {
            noPrizesWrapper.style.opacity = '0'; // Make it fade out
        }, 60000); // Fade out after 60 seconds

        // Remove the wrapper after the fade-out animation is complete
        setTimeout(() => {
            console.log(`Removing ${username}'s no prizes message after fade out.`);
            document.body.removeChild(noPrizesWrapper);
        }, 62000); // Slightly after the fade out completes

        return; // Exit the function after displaying the message
    }

    // Merge the amounts for duplicate prizes
    const mergedPrizes = userPrizes.reduce((acc, prize) => {
        const existingPrize = acc.find(p => p.prize === prize.prize);
        if (existingPrize) {
            existingPrize.amount += prize.amount;  // Merge amounts for the same prize
        } else {
            acc.push({ ...prize });  // Add new prize
        }
        return acc;
    }, []);

    // Calculate the total number of unclaimed prizes (i.e., number of different unclaimed prizes)
    const totalPrizes = mergedPrizes.length;  // Count the number of unique prizes the user has won

    // Create the wrapper element for the user's prizes
    const userPrizesWrapper = document.createElement('div');
    userPrizesWrapper.id = 'userPrizesWrapper';

    // Create the header (username) above the list
    const usernameHeader = document.createElement('div');
    usernameHeader.classList.add('username-header');
    usernameHeader.textContent = `${username} has ${totalPrizes} unclaimed prize${totalPrizes !== 1 ? 's' : ''}.`;
    userPrizesWrapper.appendChild(usernameHeader);

    // Create the list container inside the wrapper
    const userPrizeList = document.createElement('div');
    userPrizeList.id = 'userPrizeList';
    userPrizesWrapper.appendChild(userPrizeList);

    // Add each merged prize to the list
    mergedPrizes.forEach(prize => {
        const prizeItem = document.createElement('div');
        prizeItem.classList.add('user-prize-item');
        prizeItem.textContent = `${prize.prize} (Amount: ${prize.amount})`;  // Display prize name and merged amount
        userPrizeList.appendChild(prizeItem);
    });

    // Insert the wrapper at the top of the body
    document.body.insertBefore(userPrizesWrapper, document.body.firstChild);

    // Debug message to confirm element was created
    console.log(`${username}'s unclaimed prizes displayed.`);

    // Fade out the wrapper after 60 seconds
    setTimeout(() => {
        userPrizesWrapper.style.opacity = '0'; // Make it fade out
    }, 60000); // Fade out after 60 seconds

    // Remove the wrapper after the fade-out animation is complete
    setTimeout(() => {
        console.log(`Removing ${username}'s prizes wrapper after fade out.`);
        document.body.removeChild(userPrizesWrapper);
    }, 32000); // Slightly after the fade out completes
}





	
	document.addEventListener('DOMContentLoaded', () => {
		loadCSVFile();
		console.log("uhm k prizes loaded");
		document.querySelectorAll('.sortable').forEach((header, idx) => {
			header.addEventListener('click', () => sortTable(idx));
		});
		if (prizeData.length > 0) {
			displayUnclaimedPrizes();
		} else {
			console.log("Prize data is empty, cannot display unclaimed prizes.");
		}
	});
	</script>
  <script>

  </script>
  		<!-- Load Comfy js -->
	<script src="https://cdn.jsdelivr.net/npm/comfy.js@latest/dist/comfy.js"></script>
	<script src="/assets/js/themeManager.js"></script>
	<script src="/assets/js/entrivia2.js"></script>
	<script src="/assets/js/pixeldisc.js"></script>
	<script src="/assets/js/pixelpaint.js"></script>
	<!-- <script src="/assets/js/pixelspace.js"></script> -->

	<script src="/assets/js/twitchChat.js"></script>


	<!-- Wheel script -->
	<script>
	document.body.style.background = "unset";
	</script>

<script>
function poopSplat() {
    const poop = document.createElement("div");
    poop.textContent = "💩";
    poop.style.position = "fixed";

    // Random position
    const top = Math.random() * 80 + 10; // Between 10% and 90%
    const left = Math.random() * 80 + 10; // Between 10% and 90%

    // Random size (2rem - 6rem)
    const size = Math.random() * 4 + 2;

    // Random rotation (0 - 360 degrees)
    const rotation = Math.floor(Math.random() * 360);

    poop.style.top = `${top}%`;
    poop.style.left = `${left}%`;
    poop.style.transform = `translate(-50%, -50%) rotate(${rotation}deg)`;
    poop.style.fontSize = `${size}rem`;
    poop.style.opacity = "0";
    poop.style.transition = "opacity 0.4s ease";
    poop.style.zIndex = "9999";
    poop.style.pointerEvents = "none";

    document.getElementById("underlay").appendChild(poop);

    // Trigger fade-in
    requestAnimationFrame(() => {
        poop.style.opacity = "1";
    });

    // Fade out after ~1s, then remove
    setTimeout(() => {
        poop.style.opacity = "0";
        setTimeout(() => {
            poop.remove();
        }, 400); // Wait for fade-out transition
    }, 1100);
}

// Check for browser support
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
let closedCaptionsEnabled = true;
if (SpeechRecognition) {
  const recognition = new SpeechRecognition();
  recognition.lang = 'en-US';
  recognition.interimResults = true; // 🧠 Real-time updates
  recognition.maxAlternatives = 1;
  recognition.continuous = true; // 🔁 Ongoing listening

  const output = document.getElementById('output');
  const startBtn = document.getElementById('voice-btn');
  const stopBtn = document.getElementById('stop-voice-btn');

  let isListening = true;

  startBtn.addEventListener('click', () => {
    isListening = true;
    recognition.start();
    output.textContent = "🎙️ Listening...";
    startBtn.disabled = true;
    stopBtn.disabled = false;
  });

  stopBtn.addEventListener('click', () => {
    isListening = false;
    recognition.stop();
    output.textContent = "🛑 Stopped listening.";
    startBtn.disabled = false;
    stopBtn.disabled = true;
  });

  recognition.addEventListener('result', (event) => {
    let finalTranscript = "";
    let interimTranscript = "";

    for (let i = event.resultIndex; i < event.results.length; ++i) {
      const transcript = event.results[i][0].transcript.trim();
      if (event.results[i].isFinal) {
        finalTranscript += transcript + " ";
      } else {
        interimTranscript += transcript + " ";
      }
    }

    const captionsDiv = document.getElementById("captions");
    if (closedCaptionsEnabled && captionsDiv) {
      captionsDiv.textContent = interimTranscript || finalTranscript;
    }

    const finalLower = finalTranscript.toLowerCase();

    if (finalLower.includes("spin wheel")) pullDiscRotationLever();
    if (finalLower.includes("play trivia")) startentrivia();
    if (finalLower.includes("put a random question on the screen")) startentriviaAsk();
    if (interimTranscript.includes("poop")) poopSplat();

    // Just display what the user said
    if (finalTranscript) {
      output.textContent = `🗣️ You said: "${finalTranscript.trim()}"`;
      if (captionsDiv) captionsDiv.textContent = finalTranscript.trim();
    }

    let fadeTimeout;
    if (closedCaptionsEnabled && captionsDiv) {
      captionsDiv.textContent = interimTranscript || finalTranscript;
      captionsDiv.classList.remove('fade-out');

      clearTimeout(fadeTimeout);
      fadeTimeout = setTimeout(() => {
        captionsDiv.classList.add('fade-out');
      }, 4000);
    }
  });

  recognition.addEventListener('end', () => {
    if (isListening) {
      console.log("Recognition ended, restarting...");
      recognition.start();
    } else {
      console.log("Recognition stopped by user.");
    }
  });
}
</script>
	<script>
		

		window.onload = function () {
			loadCustomQuestions();
			loadSettings();
			updateCommandlist();
			connectStreamer();

		};
	</script>
	</body>
</html>

<style>
#app {
  width: 400px;
  height: 400px;
  margin: 0 auto;
  position: relative;
}

.display {
  margin-top: 2rem;
  border-top: 1px solid red;
}

.marker {
  position: absolute;
  width: 60px;
  left: 172px;
  top: -20px;
  z-index: 2;
}

.wheel {
  width: 100%;
  height: 100%;
}

.button {
  display: block;
  width: 250px;
  margin: 40px auto;
  cursor: pointer;
}

.button:hover {
  opacity: 0.8;
}

.blur {
  animation: blur 10s;
}

@keyframes blur {
  0% {
    filter: blur(1.2px);
  }
  80% {
    filter: blur(1.2px);
  }
  100% {
    filter: blur(0px);
  }
}

</style>
</head>
<body>
	<div id="app" style="margin-top: 50px">
	  <img class="marker" src="https://i.postimg.cc/vT2rLMdL/marker.png" />
	  <img class="wheel" src="https://i.postimg.cc/wBmH0ysn/wheel-1.png" />
	  <div class="display">-</div>
	</div>
	<script>
		(function () {
		  // Counter clockwise
		  const symbolSegments = {
			1: "Additional 5% off on existing discount", //  prob 1
			2: "Additional 10% off on existing discount", // prob 1
			3: "Flat 25% off probability", // 0.10
			4: "Flat 50% off, probability", //  0.10
			5: "Please try your luck again", //prob 0.8
			6: "Rs. 200 off on min. purchase Rs. 1,999", // prob 2
			7: "Rs. 450 off on min. purchase Rs. 3499", // prob 2
			8: "Rs. 750 off on Min. purchase of Rs. 4,999" // prob 3
		  };
		  function generateRandNo() {
			const random = Math.floor(Math.random() * 101);
			return random;
		  }

		  function generateBiasedValue() {
			let randNo = generateRandNo();
			
			if (randNo >=1 && randNo <= 90) biasedValue = 43;
			else biasedValue = 44;
			return biasedValue;
		  }
		  const wheel = document.querySelector(".wheel");
		  const display = document.querySelector(".display");

		  let deg = 0;
		  let zoneSize = 45; // deg

		  const handleWin = (actualDeg) => {
			const winningSymbolNr = Math.ceil(actualDeg / zoneSize);
			display.innerHTML = symbolSegments[winningSymbolNr];
		  };

		  wheel.addEventListener("click", () => {
			wheel.style.pointerEvents = "none";
			display.innerHTML = "-";
			generateBiasedValue();
			deg = 500 + 36 * biasedValue;

			wheel.style.transition = "all 5s ease-out";
			wheel.style.transform = `rotate(${deg}deg)`;
			wheel.classList.add("blur");
		  });

		  wheel.addEventListener("transitionend", () => {
			wheel.classList.remove("blur");
			wheel.style.pointerEvents = "auto";
			wheel.style.transition = "none";
			const actualDeg = deg % 360;
			wheel.style.transform = `rotate(${actualDeg}deg)`;
			console.log(`${actualDeg}deg`);
			handleWin(actualDeg);
		  });
		})();
	</script>
</body>
